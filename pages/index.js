import Head from 'next/head'
import { Inter } from '@next/font/google'
import styles from '../styles/Home.module.css'
import {useRouter} from 'next/router'
import Experience from './experience'
import Projects from './projects'
import TechStack from '../components/TechStack'
const inter = Inter({ subsets: ['latin'] })

export default function Home({user,Data})
{
    console.log(user)
    const router=useRouter()
    const handleFollow=() =>
    {
        router.push(`${user.html_url}`)
    }
    const handleResume=() =>
    {
        router.push(`https://drive.google.com/file/d/16yCvFjENxUHmZ7T564TxagBEBtEt9Y4E/view`)
    }
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
          <main className={styles.main}>
              <div className={styles.mainPage}>     
              <div className={styles.user}> 
              <img src={user.avatar_url} alt="github" />
              <h1>{user.name}</h1>
              <h4>@{user.login}</h4>
              <p>{user.bio.substr(0,100)}...</p>
              <div className={styles.button}>
                  <button onClick={handleResume}>Resume</button>
                  <button onClick={handleFollow}>Follow</button>
              </div>
                  </div>
                  <div className={styles.Techs}>
                  <TechStack />
                  </div>
                  <div className={styles.experience}>
                  <Experience />
                      </div>
           </div>
              <Projects user={Data.items}/>
      </main>
    </>
  )
}

export async function getStaticProps()
{
    let res=await fetch(`https://api.github.com/users/brar21`)
    let data=await res.json();
    let resp=await fetch(`https://api.github.com/search/repositories?q=user:brar21+fork:true&sort=updated&per_page=10&type=Repositories`)
    let Data=await resp.json();
    return {
        props: {
            user: data,
            Data:Data
        }
    }
}
